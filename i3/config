#My configuration
#notes:
#symbolic keybindings have been replaced by code keybindings to accomodate multiple keyboard layouts
#run xmodmap -pke to view mappings in future

#set primary mod character (super key)
set $mod Mod4

#set keyboard layouts
bindcode $mod+Ctrl+46 exec ~/.config/i3/keyboardSwitch.sh

# Start XDG autostart .desktop files using dex. See also https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# Font for window titles. Will also be used by the bar unless a different font is used in the bar {} block below.
#https://www.nerdfonts.com/cheat-sheet
font pango:Chakra Petch 10

#configure monitors on start-up - generated by arandr
exec --no-startup-id xrandr --output DP-0 --off --output DP-1 --off --output DP-2 --off --output DP-3 --primary --mode 1920x1080 --pos 0x1379 --rotate normal --output DP-4 --off --output DP-5 --mode 1920x1080 --pos 2378x110 --rotate left --output DP-6 --off --output DP-7 --mode 1920x1080 --pos 0x0 --rotate inverted

# set backgrounds to fill: samsung monitor		portrait monitor		inverted monitor  
exec_always --no-startup-id feh --bg-fill ~/.config/i3/monitor-primary.png ~/.config/i3/monitor-right.png ~/.config/i3/monitor-top.png
exec_always --no-startup-id picom  --config ~/.config/picom.conf -b
exec_always --no-startup-id python3 ~/.config/i3/dynamicBorder.py

#set colors - may cause crash or need fo reload
exec_always --no-startup-id python3 ~/.config/i3/setPalette.py

#initialize conky
exec_always --no-startup-id conky -c ~/.config/conky/conkyMain.conf &

#set keyboard layouts:
#exec_always i3run setxkbmap -layout us, us dvorak
#exec_always i3run setxkbmap -option 'grp:ctrl_alt_toggle'

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
#lock screen 53 = qwerty(x)
bindcode $mod+53 exec --no-startup-id  ~/.config/i3/lock.sh
exec_always --no-startup-id xautolock -time 60 -locker 'systemctl suspend' --notify 3300 -notifier '~/.config/i3/lock.sh'

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

#----------------Window Manipulation---------------

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1a " I"
set $ws1b "  I"
set $ws1c "󰄾 I"
set $ws2a " II"
set $ws2b "  II"
set $ws2c "󰄾 II"
set $ws3a " III"
set $ws3b "  III"
set $ws3c "󰄾 III"
set $ws4a " IV"
set $ws4b "  IV"
set $ws4c "󰄾 IV"

workspace $ws1a output DP-7
workspace $ws2a output DP-7
workspace $ws3a output DP-7
workspace $ws4a output DP-7
workspace $ws1b output DP-3
workspace $ws2b output DP-3
workspace $ws3b output DP-3
workspace $ws4b output DP-3
workspace $ws1c output DP-5
workspace $ws2c output DP-5
workspace $ws3c output DP-5
workspace $ws4c output DP-5

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

#switch focus between windows: (qwerty(43):h, 48:', 29:y, 57:n)
bindcode $mod+43 focus left
bindcode $mod+48 focus right
bindcode $mod+29 focus up
bindcode $mod+57 focus down

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

#move windows to different workspaces directionally
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindcode $mod+Shift+48 split h
# split in vertical orientation qwerty(55) = v
bindcode $mod+Shift+55 split v

# enter fullscreen mode for the focused container qwerty(41) = f
bindcode $mod+41 fullscreen toggle

# change container layout (stacked, tabbed, toggle split) qwerty(39):s, 28:t, 40:d 26:e
bindcode $mod+Shift+39 layout stacking
bindcode $mod+Shift+28 layout tabbed
bindcode $mod+Shift+40 layout default
bindcode $mod+26 layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container 38:a, 40:d
bindcode $mod+38 focus parent
# focus the child container
bindcode $mod+40 focus child

# switch to workspace
# i3 uses keycodes or key sysm - keycodes are keyboard layout independent - run xmodmap -pke to see qwerty - keycode layout
bindcode $mod+30 workspace $ws1a
bindcode $mod+44 workspace $ws1b
bindcode $mod+58 workspace $ws1c
bindcode $mod+31 workspace $ws2a
bindcode $mod+45 workspace $ws2b
bindcode $mod+59 workspace $ws2c
bindcode $mod+32 workspace $ws3a
bindcode $mod+46 workspace $ws3b
bindcode $mod+60 workspace $ws3c
bindcode $mod+33 workspace $ws4a
bindcode $mod+47 workspace $ws4b
bindcode $mod+61 workspace $ws4c

#switch to workspace sets (all I, or all II, etc)
bindcode $mod+Ctrl+30 workspace $ws1a; workspace $ws1c; workspace $ws1b
bindcode $mod+Ctrl+31 workspace $ws2a; workspace $ws2c; workspace $ws2b
bindcode $mod+Ctrl+32 workspace $ws3a; workspace $ws3c; workspace $ws3b
bindcode $mod+Ctrl+33 workspace $ws4a; workspace $ws4c; workspace $ws4b

# move focused container to workspace
bindcode $mod+Shift+30 move container to workspace $ws1a; workspace $ws1a
bindcode $mod+Shift+44 move container to workspace $ws1b; workspace $ws1b
bindcode $mod+Shift+58 move container to workspace $ws1c; workspace $ws1c
bindcode $mod+Shift+31 move container to workspace $ws2a; workspace $ws2a
bindcode $mod+Shift+45 move container to workspace $ws2b; workspace $ws2b
bindcode $mod+Shift+59 move container to workspace $ws2c; workspace $ws2c
bindcode $mod+Shift+32 move container to workspace $ws3a; workspace $ws3a
bindcode $mod+Shift+46 move container to workspace $ws3b; workspace $ws3b
bindcode $mod+Shift+60 move container to workspace $ws3c; workspace $ws3c
bindcode $mod+Shift+33 move container to workspace $ws4a; workspace $ws4a
bindcode $mod+Shift+47 move container to workspace $ws4b; workspace $ws4b
bindcode $mod+Shift+61 move container to workspace $ws4c; workspace $ws4c

# scratchpads setup
#https://whhone.com/posts/automating-i3-scratchpad-setup/
#16 = qwerty(7)
bindcode $mod+16 exec --no-startup-id i3run --class ranger -- gnome-terminal --class ranger -- "ranger"
for_window [class="ranger"] floating enable
#17 = qwerty(8)
bindcode $mod+17 exec --no-startup-id i3run --class qalculate -- qalculate --class qalculate
for_window [class="qalculate"] floating enable
bindcode $mod+18 exec --no-startup-id i3run  --class dictClass -- gnome-terminal --class dictClass
for_window [class="dictClass"] floating enable
bindcode $mod+10 exec --no-startup-id i3run --class Conky -- conky -c ~/.config/conky.conkyMain.conf & --class Conky
for_window [class="Conky"] floating enable
#10 = qwerty 1
bindcode $mod+20 exec --no-startup-id i3run --class notes -- firefox --no-remote -P default --class notes --new-window https://keep.google.com
for_window [class="notes"] floating enable

# kill focused window
bindcode $mod+24 kill
#24=qwert(q)

#keypress to enter resize mode qwerty(27) = r
bindcode $mod+27 mode "resize"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left or qwerty(j) will shrink the window’s width.
        # Pressing right or qwerty(k) will grow the window’s width.
        # Pressing up (l) will shrink the window’s height.
        # Pressing down (;) will grow the window’s height.
        bindcode 44 resize shrink width 10 px or 10 ppt
        bindcode 45 resize grow height 10 px or 10 ppt
        bindcode 46 resize shrink height 10 px or 10 ppt
        bindcode 47 semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindcode $mod+27 mode "default"
}

#--------------Cosmetics--------------
#colour palette
set $clear #00000000
set $ghost #EEEEEE44

#gnome-palette
#root 4 - b,g,o,p
set $gp1 #F6B32D
set $gp2 #ec6717
set $gp3 #a12019
set $gp4 #ffdc3a
#group 2 blues
set $gp5 #fff9f2
set $gp6 #101010
set $gp7 #5a6b65
set $gp8 #231813
#group 3 greens
set $gp9 #9d754e
set $gp10 #c37671
set $gp11 #7e2315
set $gp12 #ffcda3
#group 4 purples
set $gp13 #490813
set $gp14 #614704
set $gp15 #000000
set $gp16 #ffffff 

#configure windows
title_align center
default_border normal 0
#show_marks enables python script in this folder to place marks on windows indicating workspace
show_marks yes
#colorclass		border		background	text		indicator	childborder
client.focused		$gp4		$gp4		$gp13		$ghost		$clear	
client.focused_inactive	$clear		$clear		$gp13		$ghost		$clear	
client.unfocused	$clear		$clear		$gp13		$ghost		$clear	
#set gap distances
gaps inner 5px
gaps outer 7px

#-----------------Start Programs---------------
#start a terminal
bindsym $mod+Return exec i3-sensible-terminal

#start ROFI
#-modi specifies modes for ROFI, switch between them using ctrl+tab
bindcode $mod+52 exec rofi -modi drun#window#power-menu:~/.config/rofi/rofi-power-menu -show drun
#keycode 52 = qwerty z

#printscreen
bindsym Print exec gnome-screenshot -i

#change keyboard layouts #28 = qwerty(t)
#bindcode $mod+28 exec setxkbmap -layout us, us dvorak

# reload the configuration file qwerty(54) = c
bindcode $mod+Shift+54 reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3) qwerty(27) = r
bindcode $mod+Shift+27 restart
